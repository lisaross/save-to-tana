chrome.runtime.onMessage.addListener((n,r,e)=>{if(n.action==="extractContent"){const o=n.options||{includeContent:!0,includeTitle:!0};try{const t={url:window.location.href,title:document.title,author:i(),description:a(),content:""};o.includeContent&&(t.content=c()),(!o.includeTitle||!t.title)&&(t.title=t.url),t.title&&(t.title=t.title.replace(/\r?\n|\r/g," ").trim()),e(t)}catch(t){console.error("Content extraction error:",t),e({url:window.location.href,title:document.title,author:"",description:"",content:"",error:!0,message:t instanceof Error?t.message:"Unknown error occurred during content extraction"})}}return!0});function c(){const n=document.querySelector("article")||document.querySelector("main")||document.querySelector(".main-content")||document.body;if(!n)return"";let r=n.innerText;const e=1e5;return r.length>e&&(r=`${r.substring(0,e)}... (content truncated due to very large page)`),r}function i(){const n=['meta[name="author"]','meta[property="article:author"]','meta[name="twitter:creator"]','meta[property="og:site_name"]'];for(const o of n){const t=document.querySelector(o);if(t?.getAttribute("content"))return t.getAttribute("content")||""}const r=['[itemtype*="schema.org/Person"] [itemprop="name"]','[itemtype*="schema.org/Organization"] [itemprop="name"]'];for(const o of r){const t=document.querySelector(o);if(t?.textContent)return t.textContent.trim()}const e=[".byline",".author",".article-author"];for(const o of e){const t=document.querySelector(o);if(t?.textContent)return t.textContent.trim()}return""}function a(){const n=['meta[name="description"]','meta[property="og:description"]','meta[name="twitter:description"]'];for(const r of n){const e=document.querySelector(r);if(e?.getAttribute("content"))return e.getAttribute("content")||""}return""}
//# sourceMappingURL=content.js.map
